{"ast":null,"code":"var _jsxFileName = \"D:\\\\Javascript\\\\React\\\\AnonymousChatApp\\\\client\\\\src\\\\Pages\\\\Home.jsx\",\n  _s = $RefreshSig$();\nimport { useMutation, useQuery } from '@apollo/client';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { createMessage } from '../apollo/Message/messageMutation';\nimport { AuthContext } from '../navigation/AuthProvider';\nimport moment from 'moment';\nimport Messages from './Messages';\nimport { getMessages } from '../apollo/Message/messageQuery';\nimport { messageCreated } from '../apollo/Message/messageSubscriptions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const {\n    user\n  } = useContext(AuthContext);\n  const [Description, setDescription] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n  const {\n    loading,\n    data,\n    subscribeToMore\n  } = useQuery(getMessages);\n  const [sendMessage] = useMutation(createMessage);\n  const handleSubmit = async key => {\n    if (key === \"Enter\") {\n      if (Description) {\n        let today = new Date();\n        let todayy = today.getFullYear() + \"\" + (today.getMonth() + 1 < 10 ? \"0\" + (today.getMonth() + 1) : today.getMonth() + 1) + \"\" + today.getDate() + \", \" + today.getHours() + \":\" + (today.getMinutes() < 10 ? \"0\" + today.getMinutes() : today.getMinutes()) + \":\" + today.getSeconds();\n        const time = today.getFullYear() + \"\" + (today.getMonth() < 10 ? \"0\" + today.getMonth() : today.getMonth()) + \"\" + (today.getDate() < 10 ? \"0\" + today.getDate() : today.getDate()) + \"\" + (today.getHours() < 10 ? \"0\" + today.getHours() : today.getHours()) + \"\" + (today.getMinutes() < 10 ? \"0\" + today.getMinutes() : today.getMinutes()) + \"\" + (today.getSeconds() < 10 ? \"0\" + today.getSeconds() : today.getSeconds()) + \"\" + (today.getMilliseconds() < 10 ? \"0\" + today.getMilliseconds() : today.getMilliseconds());\n        const message = await sendMessage({\n          variables: {\n            data: {\n              From: user,\n              Description,\n              FullDate: todayy,\n              Date: moment().format(\"lll\"),\n              Time: time,\n              Month: today.getMonth() + 1\n            }\n          }\n        });\n        if (message) {\n          setDescription(\"\");\n        }\n      }\n    }\n  };\n  useEffect(() => {\n    subscribeToMore({\n      document: messageCreated,\n      updateQuery: (prev, _ref) => {\n        let {\n          subscriptionData\n        } = _ref;\n        if (!subscriptionData.data) return prev;\n        const newMessage = subscriptionData.data.messageCreated;\n        return {\n          message: {\n            ...prev.messages,\n            newMessage\n          }\n        };\n      }\n    });\n  }, [subscribeToMore]);\n  useEffect(() => {\n    if (data) {\n      console.log(data);\n    }\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full h-screen flex flex-col space-y-2 bg-slate-700 items-center justify-center\",\n    children: [/*#__PURE__*/_jsxDEV(Messages, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-[50%] flex flex-row space-x-3\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        onKeyDown: e => handleSubmit(e.key),\n        value: Description,\n        onChange: e => setDescription(e.target.value),\n        type: \"text\",\n        className: \"flex-1 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\",\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this);\n};\n_s(Home, \"3mWf6KZBCGGQWOR/0m4xyKp0ffo=\", false, function () {\n  return [useQuery, useMutation];\n});\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useMutation","useQuery","React","useContext","useEffect","useState","createMessage","AuthContext","moment","Messages","getMessages","messageCreated","jsxDEV","_jsxDEV","Home","_s","user","Description","setDescription","messages","setMessages","loading","data","subscribeToMore","sendMessage","handleSubmit","key","today","Date","todayy","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","time","getMilliseconds","message","variables","From","FullDate","format","Time","Month","document","updateQuery","prev","_ref","subscriptionData","newMessage","console","log","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onKeyDown","e","value","onChange","target","type","required","_c","$RefreshReg$"],"sources":["D:/Javascript/React/AnonymousChatApp/client/src/Pages/Home.jsx"],"sourcesContent":["import { useMutation, useQuery } from '@apollo/client';\r\nimport React, { useContext, useEffect, useState } from 'react'\r\nimport { createMessage } from '../apollo/Message/messageMutation';\r\nimport { AuthContext } from '../navigation/AuthProvider';\r\nimport moment from 'moment'\r\nimport Messages from './Messages';\r\nimport { getMessages } from '../apollo/Message/messageQuery';\r\nimport { messageCreated } from '../apollo/Message/messageSubscriptions';\r\n\r\nconst Home = () => {\r\n\r\n    const { user } = useContext(AuthContext);\r\n    const [Description, setDescription] = useState(\"\");\r\n    const [messages, setMessages] = useState([]);\r\n    const { loading, data, subscribeToMore } = useQuery(getMessages);\r\n    const [sendMessage] = useMutation(createMessage);\r\n\r\n    const handleSubmit = async (key) => {\r\n        if (key === \"Enter\") {\r\n            if (Description) {\r\n\r\n                let today = new Date();\r\n\r\n                let todayy = today.getFullYear() + \"\" +\r\n                    ((today.getMonth() + 1) < 10 ? (\"0\" + (today.getMonth() + 1))\r\n                        : (today.getMonth() + 1)) + \"\" + today.getDate() + \", \" +\r\n                    today.getHours() + \":\" +\r\n                    ((today.getMinutes()) < 10 ? (\"0\" + (today.getMinutes()))\r\n                        : (today.getMinutes())) + \":\" +\r\n                    today.getSeconds();\r\n\r\n                const time = today.getFullYear() + \"\" +\r\n                    (today.getMonth() < 10 ? (\"0\" + today.getMonth()) : today.getMonth())\r\n                    + \"\" +\r\n                    (today.getDate() < 10 ? (\"0\" + today.getDate()) : today.getDate())\r\n                    + \"\" +\r\n                    (today.getHours() < 10 ? (\"0\" + today.getHours()) : today.getHours())\r\n                    + \"\" +\r\n                    (today.getMinutes() < 10 ? (\"0\" + today.getMinutes()) : today.getMinutes())\r\n                    + \"\" +\r\n                    (today.getSeconds() < 10 ? (\"0\" + today.getSeconds()) : today.getSeconds())\r\n                    + \"\" +\r\n                    (today.getMilliseconds() < 10 ? (\"0\" + today.getMilliseconds()) : today.getMilliseconds());\r\n\r\n                const message = await sendMessage({\r\n                    variables: {\r\n                        data: {\r\n                            From: user,\r\n                            Description,\r\n                            FullDate: todayy,\r\n                            Date: moment().format(\"lll\"),\r\n                            Time: time,\r\n                            Month: (today.getMonth() + 1),\r\n                        }\r\n                    }\r\n                });\r\n                if (message) {\r\n                    setDescription(\"\");\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        subscribeToMore({\r\n            document: messageCreated,\r\n            updateQuery: (prev, { subscriptionData }) => {\r\n                if (!subscriptionData.data) return prev;\r\n\r\n                const newMessage = subscriptionData.data.messageCreated;\r\n                return {\r\n                    message: {\r\n                        ...prev.messages,\r\n                        newMessage\r\n                    },\r\n                };\r\n            }\r\n        })\r\n\r\n    }, [subscribeToMore]);\r\n\r\n    useEffect(() => {\r\n      \r\n        if(data){\r\n            console.log(data)\r\n        }\r\n\r\n    }, [data])\r\n\r\n    return (\r\n        <div className='w-full h-screen flex flex-col space-y-2 bg-slate-700 items-center justify-center'>\r\n\r\n            <Messages />\r\n\r\n            <div className='w-[50%] flex flex-row space-x-3'>\r\n\r\n                <input\r\n                    onKeyDown={e => handleSubmit(e.key)}\r\n                    value={Description}\r\n                    onChange={e => setDescription(e.target.value)}\r\n                    type=\"text\"\r\n                    className=\"flex-1 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\"\r\n                    required />\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}